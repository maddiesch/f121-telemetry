package packet_test

import (
	"encoding/base64"
	"testing"

	"github.com/maddiesch/telemetry/internal/packet"
	"github.com/stretchr/testify/assert"
)

func TestCarStatus(t *testing.T) {
	packetData, _ := base64.RawStdEncoding.DecodeString(`5QcBEgEHD9GPo5li73jY9Qs8AAAAABP/AgEBPADMOeZAAADcQiTaaj/IMswQCQAAABEQAAAAJHRKAwAAAAAAAAAAAAAAAAACAQE8AEQX70AAANxCnKyHP8gyzBAJAAAAERAAAAAkdEoBAAAAAAAAAAAAAAAAAAIBATwAnRrkQAAA3ELw8l4/yDLMEAkAAAAREAAAACR0SgEAAAAAAAAAAAAAAAAAAgEBPABkJu5AAADcQprbhD/IMswQCQAAABEQAAAAJHRKAQAAAAAAAAAAAAAAAAACAQE8AAY69kAAANxCpJeYP8gyqw0JAAAAERAAAAAkdEoDAAAAAAAAAAAAAAAAAAIBATwA8KHvQAAA3EIwnok/yDKrDQkAAAAREAAAACR0SgEAAAAAAAAAAAAAAAAAAgEBPAD78uJAAADcQgynWj/IMtcOCQAAABEQAAAAJHRKAQAAAAAAAAAAAAAAAAACAQE8ALuH70AAANxCwCWKP8gyzBAJAAAAERAAAAAkdEoDAAAAAAAAAAAAAAAAAAIBATwA9FLzQAAA3EJUao8/yDLMEAkAAAAREAAAACR0SgEAAAAAAAAAAAAAAAAAAgEBPAA+K/BAAADcQiBqij/IMqsNCQAAABEQAAAAJHRKAQAAAAAAAAAAAAAAAAACAQE8AI4v70AAANxC7nKIP8gyzBAJAAAAERAAAAAkdEoBAAAAAAAAAAAAAAAAAAIBATwAVbL3QAAA3EJaWZk/yDLMEAkAAAAREAAAACR0SgEAAAAAAAAAAAAAAAAAAgEBPADOjelAAADcQiC8cz/IMswQCQAAABEQAAAAJHRKAQAAAAAAAAAAAAAAAAACAQE8ABbU6UAAANxCaI10P8gyzBAJAAAAERAAAAAkdEoBAAAAAAAAAAAAAAAAAAIBATwA9fnwQAAA3ELo2Yo/yDLMEAkAAAAREAAAACR0SgEAAAAAAAAAAAAAAAAAAgEBPAAza/RAAADcQsRDlD/IMtcOCQAAABEQAAAAJHRKAQAAAAAAAAAAAAAAAAACAQE8AOSb6UAAANxCMD92P8gyzBAJAAAAERAAAAAkdEoBAAAAAAAAAAAAAAAAAAIBATwAsFnwQAAA3EIiDYo/yDLMEAkAAAAREAAAACR0SgEAAAAAAAAAAAAAAAAAAgEBPAD+5OZAAADcQlzcaD/IMswQCQAAABEQAAAAJHRKAQAAAAAAAAAAAAAAAAACAQE8AM3M7EAAANxCil2EP8gyqw0JAAAAERAAAAAkdEoBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA`)

	p, err := packet.DecodeStrict(packetData, true)

	if assert.NoError(t, err) {
		assert.NotZero(t, p.Header())
		assert.Equal(t, packet.PacketTypeCarStatus, p.ID())
	}
}
